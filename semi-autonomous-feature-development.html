<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>NA • pepdiff</title><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="NA"><meta property="og:image" content="https://teammaclean.github.io/pepdiff/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">pepdiff</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="articles/basic_workflow.html">Getting Started</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Analysis Methods</h6></li>
    <li><a class="dropdown-item" href="articles/glm_analysis.html">GLM Analysis</a></li>
    <li><a class="dropdown-item" href="articles/art_analysis.html">ART Analysis</a></li>
    <li><a class="dropdown-item" href="articles/pairwise_tests.html">Pairwise Tests</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Diagnostics</h6></li>
    <li><a class="dropdown-item" href="articles/checking_fit.html">Checking Model Fit</a></li>
    <li><a class="dropdown-item" href="articles/diagnostic_plots.html">Diagnostic Plots</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-title-body">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="logo.svg" class="logo" alt=""><h1>NA</h1>

    </div>


<p>whl # Semi-Autonomous Feature Development</p>
<p>A workflow for humans and Claude to collaborate on feature development with minimal back-and-forth.</p>
<div class="section level2">
<h2 id="the-problem">The Problem<a class="anchor" aria-label="anchor" href="#the-problem"></a></h2>
<p>Traditional AI-assisted development has friction: - Human stays in the loop for every iteration - Unclear when “done” is actually done - Context gets consumed by discussion before implementation - Repeated clarification questions</p>
</div>
<div class="section level2">
<h2 id="the-solution-discuss--tdd--ralph-loop">The Solution: Discuss → TDD → Ralph Loop<a class="anchor" aria-label="anchor" href="#the-solution-discuss--tdd--ralph-loop"></a></h2>
<div class="section level3">
<h3 id="phase-1-discuss">Phase 1: Discuss<a class="anchor" aria-label="anchor" href="#phase-1-discuss"></a></h3>
<p><strong>Goal</strong>: Reach shared understanding of requirements before any code.</p>
<ul><li>Human describes the feature/bug</li>
<li>Claude asks clarifying questions</li>
<li>Agree on scope, edge cases, and what “done” looks like</li>
<li>Identify relevant files and architecture patterns</li>
</ul><p><strong>Output</strong>: Clear requirements that can be expressed as a test.</p>
</div>
<div class="section level3">
<h3 id="phase-2-tdd-write-failing-test-first">Phase 2: TDD (Write Failing Test First)<a class="anchor" aria-label="anchor" href="#phase-2-tdd-write-failing-test-first"></a></h3>
<p><strong>Goal</strong>: Create an objective, automated definition of “done”.</p>
<ol style="list-style-type: decimal"><li>Claude writes a test that captures the requirement</li>
<li>Run the test to confirm it <strong>fails</strong> (red)</li>
<li>The test IS the spec - no ambiguity about completion</li>
</ol><p><strong>Key principle</strong>: No implementation code until the test exists and fails.</p>
</div>
<div class="section level3">
<h3 id="phase-3-ralph-loop-autonomous-implementation">Phase 3: Ralph Loop (Autonomous Implementation)<a class="anchor" aria-label="anchor" href="#phase-3-ralph-loop-autonomous-implementation"></a></h3>
<p><strong>Goal</strong>: Claude iterates autonomously until tests pass.</p>
<pre><code>/ralph-loop "Implement [feature description].

## Failing Test
tests/e2e/my-feature.test.ts

## Relevant Files
- src/lib/services/foo.ts
- src/lib/components/Bar.svelte

## Verification
npx playwright test my-feature.test.ts
Must show: X passed

## Success Criteria
All tests pass." --completion-promise "FEATURE-COMPLETE" --max-iterations 20</code></pre>
<p><strong>What happens</strong>: 1. Claude works on implementation 2. Runs verification command 3. If tests fail, continues iterating 4. If tests pass, outputs the promise tag and loop exits 5. Human does final smoke test</p>
<hr></div>
</div>
<div class="section level2">
<h2 id="context-management">Context Management<a class="anchor" aria-label="anchor" href="#context-management"></a></h2>
<div class="section level3">
<h3 id="clear-context-before-ralph-loop">Clear Context Before Ralph Loop<a class="anchor" aria-label="anchor" href="#clear-context-before-ralph-loop"></a></h3>
<p>Discussion consumes context. Before starting Ralph Loop:</p>
<ol style="list-style-type: decimal"><li>
<strong>Commit the failing test</strong> (preserves the spec in files)</li>
<li>
<strong>Start a fresh Claude session</strong> or use <code>/clear</code>
</li>
<li>
<strong>Run Ralph Loop</strong> with full context available for implementation</li>
</ol><p>This ensures Claude has maximum context for the actual work, not filled with discussion history.</p>
</div>
<div class="section level3">
<h3 id="what-goes-in-the-ralph-loop-prompt">What Goes in the Ralph Loop Prompt<a class="anchor" aria-label="anchor" href="#what-goes-in-the-ralph-loop-prompt"></a></h3>
<p>Since context is cleared, the prompt must be self-contained:</p>
<ul><li>
<strong>Feature description</strong>: What we’re building (brief)</li>
<li>
<strong>Failing test</strong>: Exact file path</li>
<li>
<strong>Relevant files</strong>: Where to look/modify</li>
<li>
<strong>Verification command</strong>: Exact command to run</li>
<li>
<strong>Success criteria</strong>: What “pass” looks like</li>
</ul><p>The prompt references files (test, source) rather than repeating discussion content.</p>
<hr></div>
</div>
<div class="section level2">
<h2 id="example-workflow">Example Workflow<a class="anchor" aria-label="anchor" href="#example-workflow"></a></h2>
<div class="section level3">
<h3 id="id_1-discussion-phase">1. Discussion Phase<a class="anchor" aria-label="anchor" href="#id_1-discussion-phase"></a></h3>
<p>Human and Claude discuss the bug, identify root cause possibilities, agree on expected behavior.</p>
</div>
<div class="section level3">
<h3 id="id_2-tdd-phase">2. TDD Phase<a class="anchor" aria-label="anchor" href="#id_2-tdd-phase"></a></h3>
<p>Claude writes a test:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co">// tests/e2e/coordinate-input.test.ts</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="fu">test</span>(<span class="st">'accepts NC_ accession format'</span><span class="op">,</span> <span class="kw">async</span> ({ page }) <span class="kw">=&gt;</span> {</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>  <span class="cf">await</span> page<span class="op">.</span><span class="fu">goto</span>(<span class="st">'/'</span>)<span class="op">;</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>  <span class="kw">const</span> input <span class="op">=</span> page<span class="op">.</span><span class="fu">getByPlaceholder</span>(<span class="st">'chr1:1000-2000'</span>)<span class="op">;</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>  <span class="cf">await</span> input<span class="op">.</span><span class="fu">fill</span>(<span class="st">'NC_000913.3:100000-100100'</span>)<span class="op">;</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>  <span class="cf">await</span> input<span class="op">.</span><span class="fu">press</span>(<span class="st">'Enter'</span>)<span class="op">;</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>  <span class="co">// Should navigate without error</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>  <span class="cf">await</span> <span class="fu">expect</span>(page<span class="op">.</span><span class="fu">locator</span>(<span class="st">'.error'</span>))<span class="op">.</span><span class="at">not</span><span class="op">.</span><span class="fu">toBeVisible</span>()<span class="op">;</span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a>  <span class="cf">await</span> <span class="fu">expect</span>(input)<span class="op">.</span><span class="fu">toHaveValue</span>(<span class="ss">/NC_000913/</span>)<span class="op">;</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<p>Run it, confirm failure:</p>
<pre><code>npx playwright test coordinate-input.test.ts
# 1 failed</code></pre>
</div>
<div class="section level3">
<h3 id="id_3-commit-and-clear">3. Commit and Clear<a class="anchor" aria-label="anchor" href="#id_3-commit-and-clear"></a></h3>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">git</span> add tests/e2e/coordinate-input.test.ts</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"Add failing test for NC_ coordinate format"</span></span></code></pre></div>
<p>Then <code>/clear</code> or start fresh session.</p>
</div>
<div class="section level3">
<h3 id="id_4-ralph-loop-phase">4. Ralph Loop Phase<a class="anchor" aria-label="anchor" href="#id_4-ralph-loop-phase"></a></h3>
<pre><code>/ralph-loop "Fix coordinate input to accept NC_ accession format.

## Failing Test
tests/e2e/coordinate-input.test.ts

## Relevant Files
- src/lib/types/genome.ts (parseCoordinate function)
- src/lib/components/Header.svelte (input handling)

## Verification
npx playwright test coordinate-input.test.ts

## Success Criteria
Test passes." --completion-promise "BUG-FIXED" --max-iterations 15</code></pre>
</div>
<div class="section level3">
<h3 id="id_5-human-smoke-test">5. Human Smoke Test<a class="anchor" aria-label="anchor" href="#id_5-human-smoke-test"></a></h3>
<p>Once Ralph Loop exits, human does quick manual verification in browser.</p>
<hr></div>
</div>
<div class="section level2">
<h2 id="tips">Tips<a class="anchor" aria-label="anchor" href="#tips"></a></h2>
<div class="section level3">
<h3 id="writing-good-tests">Writing Good Tests<a class="anchor" aria-label="anchor" href="#writing-good-tests"></a></h3>
<ul><li>Test the <strong>behavior</strong>, not implementation details</li>
<li>Include both positive cases (should work) and negative cases (should fail gracefully)</li>
<li>Make assertions specific enough to catch regressions</li>
</ul></div>
<div class="section level3">
<h3 id="scoping-ralph-loop-prompts">Scoping Ralph Loop Prompts<a class="anchor" aria-label="anchor" href="#scoping-ralph-loop-prompts"></a></h3>
<ul><li>List only files likely to need changes (helps Claude focus)</li>
<li>Use specific test file, not full test suite (faster iterations)</li>
<li>Set reasonable max-iterations (15-25 for bug fixes, 25-40 for features)</li>
</ul></div>
<div class="section level3">
<h3 id="when-things-go-wrong">When Things Go Wrong<a class="anchor" aria-label="anchor" href="#when-things-go-wrong"></a></h3>
<p>If Ralph Loop hits max iterations without success: 1. Read the test output to understand what’s failing 2. Check if the test itself is correct 3. May need another discussion phase to refine approach 4. Consider breaking into smaller sub-tasks</p>
<hr></div>
</div>
<div class="section level2">
<h2 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a></h2>
<table class="table"><thead><tr class="header"><th>Phase</th>
<th>Who</th>
<th>Output</th>
</tr></thead><tbody><tr class="odd"><td>Discuss</td>
<td>Human + Claude</td>
<td>Shared understanding</td>
</tr><tr class="even"><td>TDD</td>
<td>Claude</td>
<td>Failing test (committed)</td>
</tr><tr class="odd"><td>Clear</td>
<td>Human</td>
<td>Fresh context</td>
</tr><tr class="even"><td>Ralph Loop</td>
<td>Claude (autonomous)</td>
<td>Passing implementation</td>
</tr><tr class="odd"><td>Smoke Test</td>
<td>Human</td>
<td>Final verification</td>
</tr></tbody></table><p>The key insight: <strong>tests are the contract</strong>. They let Claude work autonomously with clear, objective success criteria.</p>
</div>


  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Dan MacLean.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

